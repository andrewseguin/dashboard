<ng-container *ngIf="repoDao.getIssue(issueId) | async; let issue">
  <div class="header">
    <div class="title">
      {{issue.title}}
      <span class="issue-number">
        (<a class="theme-primary" [href]="issue.url">#{{issue.number}}</a>)
      </span>
    </div>
  </div>

  <div class="context">
    <div class="created">
      Reported by {{issue.reporter}} on {{issue.created | date}}
      <ng-container *ngIf="issue.created != issue.updated">
        - issue was last updated {{issue.updated | timeAgo}}
      </ng-container>
      <span class="state theme-border"
            [class.theme-background-warn]="issue.state === 'closed'"
            [class.theme-background-positive]="issue.state === 'open'">
        {{issue.state}} </span>
    </div>
  </div>

  <label-list *ngIf="issue.labels.length" [labelIds]="issue.labels"
              class="issue-labels"></label-list>

  <ng-container
                *ngFor="let recommendation of recommendations | async; let last = last">
    <mat-divider></mat-divider>

    <recommendation-action [recommendation]="recommendation" [issue]="issue">
    </recommendation-action>

    <mat-divider *ngIf="last"></mat-divider>
  </ng-container>

  <div class="body theme-border theme-background-card markdown"
       [innerHTML]="bodyMarkdown | async"></div>

  <div *ngIf="activities | async; let activities" class="activities">
    <mat-divider *ngIf="activities.length"></mat-divider>

    <ng-container *ngFor="let a of activities" [ngSwitch]="a.type">
      <comment-view *ngSwitchCase="'comment'" [comment]="a.context">
      </comment-view>
      <timeline-event-view *ngSwitchCase="'timeline'"
                           [timelineEvent]="a.context">
      </timeline-event-view>
    </ng-container>

  </div>

</ng-container>
