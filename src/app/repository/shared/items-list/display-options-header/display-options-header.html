<div class="buttons">
  <div class="length theme-secondary-text">
    {{itemCount}} results
  </div>
  <button mat-button [mat-menu-trigger-for]="rootMenu">
    <div class="options-menu-trigger"> Display Options </div>
  </button>
</div>

<mat-menu #rootMenu="matMenu">
  <button mat-menu-item *ngIf="!hideGrouping"
          [matMenuTriggerFor]="groupingMenu">Group
    By</button>
  <button mat-menu-item [matMenuTriggerFor]="sortingMenu">Sort By</button>
  <button mat-menu-item [matMenuTriggerFor]="viewingMenu">View</button>
</mat-menu>

<!-- Group Menu -->
<mat-menu #groupingMenu="matMenu">
  <button mat-menu-item *ngFor="let groupId of groupIds"
          [class.selected]="(grouper.group$ | async) === groupId"
          (click)="grouper.group = groupId; $event.stopPropagation();">
    <div class="button-content">
      <mat-icon>check</mat-icon>
      {{groups.get(groupId).label}}
    </div>
  </button>
</mat-menu>

<!-- Sort Menu -->
<mat-menu #sortingMenu="matMenu">
  <button mat-menu-item *ngFor="let sort of sortIds"
          [class.selected]="(sorter.sorts$ | async) === sort"
          (click)="sorter.sort = sort; $event.stopPropagation();">
    <div class="button-content">
      <mat-icon>
        {{(sorter.reverse$ | async) ? arrow_downward : arrow_upward}}
      </mat-icon>
      {{sorts.get(sort)}}
    </div>
  </button>
</mat-menu>

<!-- View Menu -->
<mat-menu #viewingMenu="matMenu">
  <button mat-menu-item *ngFor="let viewKey of viewKeys"
          [class.selected]="!!options.view[viewKey]"
          (click)="toggleViewKey(viewKey); $event.stopPropagation();">
    <div class="button-content">
      <mat-icon>check</mat-icon>
      {{views.get(viewKey)}}
    </div>
  </button>
</mat-menu>
