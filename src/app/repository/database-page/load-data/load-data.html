<div class="load" *ngIf="!state && (repoDao.repo | async)?.empty">

  <div class="action">
    <button mat-raised-button color="primary" class="load-data"
            (click)="store()">
      Load Data
    </button>

    <div class="issues-form" [formGroup]="formGroup">
      <mat-select formControlName="issueDateType">
        <mat-option *ngFor="let option of ['all data', 'since']"
                    [value]="option">
          {{option}}
        </mat-option>
      </mat-select>

      <div class="datepicker" *ngIf="formGroup.value.issueDateType === 'since'">
        <input formControlName="issueDate" [matDatepicker]="picker"
               class="theme-border" (click)="picker.open()"
               placeholder="Choose a date">
        <mat-datepicker #picker></mat-datepicker>
      </div>
    </div>
  </div>

  <ng-container *ngIf="totalItemCount | async; let itemCount">
    <ng-container *ngIf="totalLabelsCount | async; let labelCount">
      <div class="data-to-load theme-secondary-text">
        ({{itemCount}} issues, {{labelCount}} labels)
      </div>
    </ng-container>
  </ng-container>
</div>


<ng-container *ngIf="state?.progress; let progress">
  <div *ngFor="let completed of completedTypes">
    {{completedType}}
  </div>

  <div class="loading">
    {{state.label}}
    {{'(' + (state.progress.value | number:'1.0-0') + '% complete)'}}
  </div>
  <mat-progress-bar *ngIf="progress.type === 'determinate'" mode="determinate"
                    [value]="state.progress.value">
  </mat-progress-bar>

  <mat-progress-bar *ngIf="progress.type === 'indeterminate'"
                    mode="indeterminate">
  </mat-progress-bar>
</ng-container>
